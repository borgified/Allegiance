//////////////////////////////////////////////////////////////////////////////
//
// 
//
//////////////////////////////////////////////////////////////////////////////

#include "pch.h"

//////////////////////////////////////////////////////////////////////////////
//
// The main entry point
//
//////////////////////////////////////////////////////////////////////////////

#include "main.h"

//////////////////////////////////////////////////////////////////////////////
//
//
//
//////////////////////////////////////////////////////////////////////////////

class MEWindow :
    public EngineWindow
{
public:
    //////////////////////////////////////////////////////////////////////////////
    //
    //
    //
    //////////////////////////////////////////////////////////////////////////////

    MEWindow(EngineApp* papp, const ZString& strCommandLine) :
        EngineWindow(
            papp, 
            strCommandLine,
            "ME - The MDL Editor",
            false,
            WinRect(10, 10, 256, 256)
        )
    {   
        SetImage(CreateColorImage(new ColorValue(Color::Black())));
        SetCursorImage(CreateCursor(GetEngine()));
    }

    void EvaluateFrame(Time ttime)
    {
        ::Sleep(1);
    }
};

//////////////////////////////////////////////////////////////////////////////
//
// ME Application
//
//////////////////////////////////////////////////////////////////////////////

class ME : public EngineApp {
protected:
   TRef<MEWindow> m_pwindow;

public:
    HRESULT Initialize(const ZString& strCommandLine)
    {
        EngineApp::Initialize(strCommandLine);
        m_pwindow = new MEWindow(this, strCommandLine);

        return S_OK;
    }

    void Terminate()
    {
        m_pwindow = NULL;
        EngineApp::Terminate();
    }
} g_app;
